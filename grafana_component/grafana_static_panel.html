<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
    </head>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>

        $(document).ready(function(){
            console.log('ready');
            const now = new Date();
            panel_width = 500;
            panel_height = 500;
            src_url = constructUrl(1, now.getTime(), now.getTime() - calculateTimeDelta(), 2, panel_width, panel_height);
            $("#grafana-comp").attr('src', src_url);
        })

        function calculateTimeDelta(){
            const now = new Date();
            let secsPerYear = 31536000;
            return secsPerYear
        }

        function constructUrl(orgId, from, to, panelId, width, height){
            const apiKey =  "eyJrIjoiZkU1ekF3ckRtVHhKN0xNbWRGQnJJa3FuS005cUd2U3YiLCJuIjoidGVzdF9rZXkiLCJpZCI6MX0="
            let base = `http://localhost:8088/render/d-solo/TwYnCJtWz/test-dashboard`
            
            // query = `?orgId=${orgId}&from=${from}&to=${to}&panelId=${panelId}&width=${width}&height=${height}`
            query = `?orgId=${orgId}&panelId=${panelId}&width=${width}&height=${height}`
            grafanaPanelUrl = base.concat(query)
            return grafanaPanelUrl
        }

    </script>

    <body>
        <!-- Need to be logged into Grafana for this to work-->
        <img id ="grafana-comp" src="hi">
    </body>

</html>